<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 12: Acids and Bases - Interactive Review</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .ai-study-buddy-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 15px 35px;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 5px 20px rgba(245, 87, 108, 0.4);
            transition: all 0.3s;
            animation: pulse 2s infinite;
        }

        .ai-study-buddy-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(245, 87, 108, 0.6);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        nav {
            background: #2c3e50;
            padding: 15px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 5px;
            transition: background 0.3s;
        }

        nav a:hover {
            background: #34495e;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 50px;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section h2 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .section h3 {
            color: #34495e;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
        }

        .concept-box {
            background: #f8f9fa;
            border-left: 5px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .concept-box.important {
            border-left-color: #e74c3c;
            background: #fff5f5;
        }

        .concept-box.tip {
            border-left-color: #f39c12;
            background: #fffbf0;
        }

        .concept-box.success {
            border-left-color: #27ae60;
            background: #f0fff4;
        }

        .video-container {
            margin: 30px 0;
            text-align: center;
        }

        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            max-width: 100%;
            background: #000;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .video-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .accordion {
            background: #ecf0f1;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            text-align: left;
            border: none;
            outline: none;
            transition: 0.3s;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 5px;
            margin-top: 10px;
            color: #2c3e50;
        }

        .accordion:hover {
            background: #d5dbdb;
        }

        .accordion.active {
            background: #667eea;
            color: white;
        }

        .accordion:after {
            content: '\002B'; /* Plus sign */
            color: #333;
            font-weight: bold;
            float: right;
            margin-left: 5px;
        }

        .accordion.active:after {
            content: "\2212"; /* Minus sign */
            color: white;
        }

        .panel {
            padding: 0 18px;
            background: white;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            border-left: 3px solid #667eea;
            margin-bottom: 10px;
        }

        .panel-content {
            padding: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
        }

        table td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }

        table tr:hover {
            background: #f5f5f5;
        }

        .formula {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .key-points {
            background: #e8f4f8;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .key-points h4 {
            color: #2980b9;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .key-points ul {
            list-style-position: inside;
            padding-left: 20px;
        }

        .key-points li {
            margin: 10px 0;
            padding-left: 10px;
        }

        .quiz-box {
            background: #fff9e6;
            border: 2px solid #f39c12;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .quiz-box h4 {
            color: #e67e22;
            margin-bottom: 15px;
        }

        .quiz-question {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 5px;
        }

        .show-answer {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 1em;
            transition: background 0.3s;
        }

        .show-answer:hover {
            background: #2980b9;
        }

        .answer {
            display: none;
            margin-top: 10px;
            padding: 15px;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            color: #155724;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .card {
            background: white;
            border: 2px solid #ecf0f1;
            border-radius: 10px;
            padding: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 30px;
        }

        footer p {
            margin: 10px 0;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }
            
            nav ul {
                flex-direction: column;
                gap: 10px;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
        }

        /* AI Study Buddy Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background: white;
            margin: 2% auto;
            width: 90%;
            max-width: 900px;
            height: 90%;
            border-radius: 15px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .modal-header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.8em;
        }

        .close-btn {
            background: rgba(255,255,255,0.3);
            border: none;
            color: white;
            font-size: 2em;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .close-btn:hover {
            background: rgba(255,255,255,0.5);
        }

        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-content {
            max-width: 70%;
            padding: 15px 20px;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .message.ai .message-content {
            background: white;
            border: 2px solid #f093fb;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .message-label {
            font-weight: bold;
            font-size: 0.85em;
            margin-bottom: 5px;
            opacity: 0.8;
        }

        .message.ai .message-label {
            color: #f5576c;
        }

        .message.user .message-label {
            color: rgba(255,255,255,0.9);
        }

        .input-area {
            padding: 20px;
            background: white;
            border-top: 2px solid #ecf0f1;
            display: flex;
            gap: 10px;
        }

        .input-area input {
            flex: 1;
            padding: 15px;
            border: 2px solid #ecf0f1;
            border-radius: 25px;
            font-size: 1em;
            outline: none;
            transition: border 0.3s;
        }

        .input-area input:focus {
            border-color: #f093fb;
        }

        .send-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .send-btn:hover {
            transform: scale(1.05);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .loading {
            display: flex;
            gap: 5px;
            padding: 10px 0;
        }

        .loading-dot {
            width: 10px;
            height: 10px;
            background: #f093fb;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .loading-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .loading-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1);
            }
        }

        .quick-actions {
            padding: 15px;
            background: #fff9e6;
            border-top: 2px solid #f39c12;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .quick-action-btn {
            background: white;
            border: 2px solid #f39c12;
            color: #e67e22;
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quick-action-btn:hover {
            background: #f39c12;
            color: white;
        }

        .welcome-message {
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-message h3 {
            color: #f5576c;
            margin-bottom: 15px;
        }

        .welcome-message p {
            color: #666;
            margin-bottom: 10px;
        }

        .topic-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .topic-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: transform 0.3s;
            font-size: 0.95em;
        }

        .topic-btn:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üß™ Chapter 12: Acids and Bases</h1>
            <p>Interactive Review Guide with Video Tutorials</p>
            <button class="ai-study-buddy-btn" onclick="openAIStudyBuddy()">
                ü§ñ AI Study Buddy - Practice Questions!
            </button>
        </header>

        <nav>
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#properties">Properties</a></li>
                <li><a href="#definitions">Definitions</a></li>
                <li><a href="#strength">Strong vs Weak</a></li>
                <li><a href="#ph">pH Scale</a></li>
                <li><a href="#buffers">Buffers</a></li>
                <li><a href="#practice">Practice</a></li>
            </ul>
        </nav>

        <div class="content">
            
            <!-- OVERVIEW SECTION -->
            <section id="overview" class="section">
                <h2>üìö Chapter Overview</h2>
                
                <div class="concept-box important">
                    <h3>What You'll Master in This Chapter</h3>
                    <p>Acids and bases are fundamental to chemistry and everyday life. From the citric acid in your orange juice to the soap you use to wash your hands, these substances are everywhere! In this chapter, you'll learn how to:</p>
                    <ul style="margin-left: 30px; margin-top: 15px;">
                        <li>‚úì Identify and describe properties of acids and bases</li>
                        <li>‚úì Understand different definitions (Arrhenius and Br√∏nsted-Lowry)</li>
                        <li>‚úì Distinguish between strong and weak acids/bases</li>
                        <li>‚úì Calculate pH, pOH, [H‚ÇÉO‚Å∫], and [OH‚Åª]</li>
                        <li>‚úì Understand how buffers work in living systems</li>
                    </ul>
                </div>

                <div class="video-container">
                    <div class="video-title">üì∫ Introduction to Acids and Bases - Dr. Dan</div>
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/_3MEHX5yvzQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>

                <div class="key-points">
                    <h4>üéØ Learning Objectives</h4>
                    <ul>
                        <li>Define and identify Arrhenius acids and bases</li>
                        <li>Define and identify Br√∏nsted-Lowry acids and bases</li>
                        <li>Identify conjugate acid-base pairs</li>
                        <li>Write and balance neutralization reactions</li>
                        <li>Classify acids and bases as strong or weak</li>
                        <li>Use Kw to calculate ion concentrations</li>
                        <li>Convert between pH, pOH, [H‚ÇÉO‚Å∫], and [OH‚Åª]</li>
                        <li>Explain how buffer solutions work</li>
                    </ul>
                </div>
            </section>

            <!-- PROPERTIES SECTION -->
            <section id="properties" class="section">
                <h2>üî¨ Properties of Acids and Bases</h2>

                <div class="grid">
                    <div class="card">
                        <h4>üçã Acid Properties</h4>
                        <ul style="margin-left: 20px;">
                            <li><strong>Taste:</strong> Sour (DON'T taste in lab!)</li>
                            <li><strong>Litmus:</strong> Turns blue ‚Üí red</li>
                            <li><strong>Phenolphthalein:</strong> Colorless</li>
                            <li><strong>Electrolytes:</strong> Conduct electricity</li>
                            <li><strong>Metals:</strong> React to produce H‚ÇÇ gas</li>
                            <li><strong>Bases:</strong> Neutralize to form salt + water</li>
                        </ul>
                    </div>

                    <div class="card">
                        <h4>üßº Base Properties</h4>
                        <ul style="margin-left: 20px;">
                            <li><strong>Taste:</strong> Bitter (DON'T taste in lab!)</li>
                            <li><strong>Feel:</strong> Slippery/soapy</li>
                            <li><strong>Litmus:</strong> Turns red ‚Üí blue</li>
                            <li><strong>Phenolphthalein:</strong> Pink/magenta</li>
                            <li><strong>Electrolytes:</strong> Conduct electricity</li>
                            <li><strong>Acids:</strong> Neutralize to form salt + water</li>
                        </ul>
                    </div>
                </div>

                <h3>Common Acids in Daily Life</h3>
                <table>
                    <tr>
                        <th>Acid</th>
                        <th>Formula</th>
                        <th>Found In / Used For</th>
                    </tr>
                    <tr>
                        <td>Hydrochloric acid</td>
                        <td>HCl</td>
                        <td>Stomach acid, pool cleaning</td>
                    </tr>
                    <tr>
                        <td>Acetic acid</td>
                        <td>HC‚ÇÇH‚ÇÉO‚ÇÇ</td>
                        <td>Vinegar</td>
                    </tr>
                    <tr>
                        <td>Citric acid</td>
                        <td>C‚ÇÜH‚ÇàO‚Çá</td>
                        <td>Citrus fruits, sodas</td>
                    </tr>
                    <tr>
                        <td>Sulfuric acid</td>
                        <td>H‚ÇÇSO‚ÇÑ</td>
                        <td>Car batteries</td>
                    </tr>
                    <tr>
                        <td>Carbonic acid</td>
                        <td>H‚ÇÇCO‚ÇÉ</td>
                        <td>Carbonated beverages</td>
                    </tr>
                </table>

                <h3>Common Bases in Daily Life</h3>
                <table>
                    <tr>
                        <th>Base</th>
                        <th>Formula</th>
                        <th>Found In / Used For</th>
                    </tr>
                    <tr>
                        <td>Sodium hydroxide</td>
                        <td>NaOH</td>
                        <td>Drain cleaners, soap making</td>
                    </tr>
                    <tr>
                        <td>Ammonia</td>
                        <td>NH‚ÇÉ</td>
                        <td>Cleaning products</td>
                    </tr>
                    <tr>
                        <td>Magnesium hydroxide</td>
                        <td>Mg(OH)‚ÇÇ</td>
                        <td>Milk of magnesia (antacid)</td>
                    </tr>
                    <tr>
                        <td>Calcium hydroxide</td>
                        <td>Ca(OH)‚ÇÇ</td>
                        <td>Cement, neutralizing soil</td>
                    </tr>
                </table>
            </section>

            <!-- DEFINITIONS SECTION -->
            <section id="definitions" class="section">
                <h2>üìñ Definitions of Acids and Bases</h2>

                <div class="video-container">
                    <div class="video-title">üì∫ Arrhenius Acids and Bases - Dr. Dan</div>
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/T8Uxtqoi1-8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>

                <button class="accordion">Arrhenius Definition (1884)</button>
                <div class="panel">
                    <div class="panel-content">
                        <div class="concept-box">
                            <h3>Arrhenius Acid</h3>
                            <p><strong>Definition:</strong> A substance that <span class="highlight">increases [H‚Å∫]</span> when dissolved in water.</p>
                            <div class="formula">HCl(aq) ‚Üí H‚Å∫(aq) + Cl‚Åª(aq)</div>
                            <p style="margin-top: 15px;"><strong>Better representation:</strong></p>
                            <div class="formula">HCl(aq) + H‚ÇÇO(l) ‚Üí H‚ÇÉO‚Å∫(aq) + Cl‚Åª(aq)</div>
                            <p style="margin-top: 15px;"><strong>Examples:</strong> HCl, HNO‚ÇÉ, H‚ÇÇSO‚ÇÑ</p>
                        </div>

                        <div class="concept-box">
                            <h3>Arrhenius Base</h3>
                            <p><strong>Definition:</strong> A substance that <span class="highlight">increases [OH‚Åª]</span> when dissolved in water.</p>
                            <div class="formula">NaOH(aq) ‚Üí Na‚Å∫(aq) + OH‚Åª(aq)</div>
                            <p style="margin-top: 15px;"><strong>Examples:</strong> NaOH, KOH, Ca(OH)‚ÇÇ</p>
                        </div>

                        <div class="concept-box tip">
                            <h3>‚ö†Ô∏è Limitations of Arrhenius Theory</h3>
                            <ul style="margin-left: 20px;">
                                <li>Only applies to aqueous (water) solutions</li>
                                <li>Cannot explain bases like NH‚ÇÉ (no OH‚Åª in formula)</li>
                                <li>Cannot explain acid-base reactions in other solvents</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="video-container">
                    <div class="video-title">üì∫ Br√∏nsted-Lowry Acids and Bases - Dr. Dan</div>
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/tGqiUbBxqec" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>

                <button class="accordion">Br√∏nsted-Lowry Definition (1923)</button>
                <div class="panel">
                    <div class="panel-content">
                        <div class="concept-box success">
                            <h3>Br√∏nsted-Lowry Acid</h3>
                            <p><strong>Definition:</strong> A <span class="highlight">proton (H‚Å∫) DONOR</span></p>
                            <p style="margin-top: 10px;">Any species that can donate a proton to another molecule.</p>
                        </div>

                        <div class="concept-box success">
                            <h3>Br√∏nsted-Lowry Base</h3>
                            <p><strong>Definition:</strong> A <span class="highlight">proton (H‚Å∫) ACCEPTOR</span></p>
                            <p style="margin-top: 10px;">Any species that can accept a proton from another molecule.</p>
                        </div>

                        <h3>Example: Ammonia in Water</h3>
                        <div class="formula">NH‚ÇÉ(aq) + H‚ÇÇO(l) ‚áå NH‚ÇÑ‚Å∫(aq) + OH‚Åª(aq)</div>
                        <ul style="margin: 15px 0 15px 30px;">
                            <li><strong>H‚ÇÇO</strong> donates H‚Å∫ ‚Üí <strong>ACID</strong> (proton donor)</li>
                            <li><strong>NH‚ÇÉ</strong> accepts H‚Å∫ ‚Üí <strong>BASE</strong> (proton acceptor)</li>
                            <li>This explains why NH‚ÇÉ is a base even without OH‚Åª in its formula!</li>
                        </ul>

                        <div class="concept-box tip">
                            <h3>üîë Key Relationship</h3>
                            <p><strong>All Arrhenius acids and bases are also Br√∏nsted-Lowry acids and bases.</strong></p>
                            <p><strong>NOT all Br√∏nsted-Lowry acids and bases are Arrhenius acids and bases.</strong></p>
                            <p style="margin-top: 10px;">Br√∏nsted-Lowry is MORE GENERAL and more widely applicable!</p>
                        </div>
                    </div>
                </div>

                <div class="video-container">
                    <div class="video-title">üì∫ Conjugate Acid-Base Pairs - Dr. Dan</div>
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/AAOXGkcrUMg" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>

                <button class="accordion">Conjugate Acid-Base Pairs</button>
                <div class="panel">
                    <div class="panel-content">
                        <div class="concept-box important">
                            <h3>What are Conjugate Pairs?</h3>
                            <p>When a Br√∏nsted-Lowry acid donates a proton, it becomes its <strong>conjugate base</strong>.</p>
                            <p>When a Br√∏nsted-Lowry base accepts a proton, it becomes its <strong>conjugate acid</strong>.</p>
                            <p style="margin-top: 15px;"><span class="highlight">Conjugate acid-base pairs differ by exactly ONE proton (H‚Å∫)</span></p>
                        </div>

                        <h3>Example 1: Water and Ammonia</h3>
                        <div class="formula">NH‚ÇÉ(aq) + H‚ÇÇO(l) ‚áå NH‚ÇÑ‚Å∫(aq) + OH‚Åª(aq)</div>
                        
                        <table style="margin-top: 20px;">
                            <tr>
                                <th>Conjugate Pair 1</th>
                                <th>Conjugate Pair 2</th>
                            </tr>
                            <tr>
                                <td>
                                    <strong>H‚ÇÇO</strong> (acid) / <strong>OH‚Åª</strong> (conjugate base)<br>
                                    <em>H‚ÇÇO loses H‚Å∫ ‚Üí becomes OH‚Åª</em>
                                </td>
                                <td>
                                    <strong>NH‚ÇÉ</strong> (base) / <strong>NH‚ÇÑ‚Å∫</strong> (conjugate acid)<br>
                                    <em>NH‚ÇÉ gains H‚Å∫ ‚Üí becomes NH‚ÇÑ‚Å∫</em>
                                </td>
                            </tr>
                        </table>

                        <h3>Example 2: Acetic Acid and Water</h3>
                        <div class="formula">HC‚ÇÇH‚ÇÉO‚ÇÇ(aq) + H‚ÇÇO(l) ‚áå H‚ÇÉO‚Å∫(aq) + C‚ÇÇH‚ÇÉO‚ÇÇ‚Åª(aq)</div>
                        
                        <table style="margin-top: 20px;">
                            <tr>
                                <th>Conjugate Pair 1</th>
                                <th>Conjugate Pair 2</th>
                            </tr>
                            <tr>
                                <td>
                                    <strong>HC‚ÇÇH‚ÇÉO‚ÇÇ</strong> (acid) / <strong>C‚ÇÇH‚ÇÉO‚ÇÇ‚Åª</strong> (conjugate base)<br>
                                    <em>Acetic acid loses H‚Å∫ ‚Üí becomes acetate ion</em>
                                </td>
                                <td>
                                    <strong>H‚ÇÇO</strong> (base) / <strong>H‚ÇÉO‚Å∫</strong> (conjugate acid)<br>
                                    <em>Water gains H‚Å∫ ‚Üí becomes hydronium ion</em>
                                </td>
                            </tr>
                        </table>

                        <div class="concept-box tip">
                            <h3>üí° Important Concepts</h3>
                            <ul style="margin-left: 20px;">
                                <li>The reverse reaction is ALSO an acid-base reaction!</li>
                                <li>Water (H‚ÇÇO) can act as BOTH an acid and a base (amphoteric)</li>
                                <li>Strong acids have weak conjugate bases</li>
                                <li>Strong bases have weak conjugate acids</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <button class="accordion">Neutralization Reactions</button>
                <div class="panel">
                    <div class="panel-content">
                        <div class="concept-box">
                            <h3>What is Neutralization?</h3>
                            <p>A <strong>neutralization reaction</strong> occurs when an acid and base react to produce water and a salt.</p>
                            <div class="formula">Acid + Base ‚Üí Salt + Water</div>
                        </div>

                        <h3>What is a Salt?</h3>
                        <p>A <strong>salt</strong> is an ionic compound containing:</p>
                        <ul style="margin-left: 30px; margin-top: 10px;">
                            <li>A positive ion (cation) OTHER than H‚Å∫</li>
                            <li>A negative ion (anion) OTHER than OH‚Åª</li>
                        </ul>

                        <h3>Example Neutralization Reactions</h3>
                        
                        <div class="concept-box">
                            <h4>Example 1: HCl + NaOH</h4>
                            <p><strong>Molecular equation:</strong></p>
                            <div class="formula">HCl(aq) + NaOH(aq) ‚Üí NaCl(aq) + H‚ÇÇO(l)</div>
                            <p style="margin-top: 15px;"><strong>Net ionic equation:</strong></p>
                            <div class="formula">H‚Å∫(aq) + OH‚Åª(aq) ‚Üí H‚ÇÇO(l)</div>
                            <p style="margin-top: 15px;"><strong>The salt is: NaCl (sodium chloride)</strong></p>
                        </div>

                        <div class="concept-box">
                            <h4>Example 2: H‚ÇÇSO‚ÇÑ + 2KOH</h4>
                            <p><strong>Molecular equation:</strong></p>
                            <div class="formula">H‚ÇÇSO‚ÇÑ(aq) + 2KOH(aq) ‚Üí K‚ÇÇSO‚ÇÑ(aq) + 2H‚ÇÇO(l)</div>
                            <p style="margin-top: 15px;"><strong>The salt is: K‚ÇÇSO‚ÇÑ (potassium sulfate)</strong></p>
                        </div>

                        <div class="key-points">
                            <h4>Key Points About Neutralization</h4>
                            <ul>
                                <li>When [H‚Å∫] = [OH‚Åª], the solution is neutral (pH = 7)</li>
                                <li>Acid and base "neutralize" each other</li>
                                <li>Net ionic equation is always: H‚Å∫ + OH‚Åª ‚Üí H‚ÇÇO</li>
                                <li>Must balance equation for proper stoichiometry</li>
                                <li>Polyprotic acids can donate multiple H‚Å∫ ions</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- STRONG VS WEAK SECTION -->
            <section id="strength" class="section">
                <h2>üí™ Strong vs. Weak Acids and Bases</h2>

                <div class="video-container">
                    <div class="video-title">üì∫ Strong and Weak Acids - Dr. Dan</div>
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/M5gCzKjb0kA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>

                <div class="grid">
                    <div class="card">
                        <h4>üí• Strong Acids</h4>
                        <div class="concept-box important">
                            <p><strong>Definition:</strong> Dissociate <span class="highlight">100%</span> in aqueous solution</p>
                            <p style="margin-top: 10px;"><strong>Use single arrow (‚Üí)</strong></p>
                            <div class="formula" style="font-size: 0.9em;">HCl(aq) ‚Üí H‚Å∫(aq) + Cl‚Åª(aq)</div>
                        </div>
                        <h4 style="margin-top: 20px;">MEMORIZE THESE 6-7 Strong Acids:</h4>
                        <ol style="margin-left: 25px; margin-top: 10px;">
                            <li><strong>HCl</strong> - Hydrochloric acid</li>
                            <li><strong>HBr</strong> - Hydrobromic acid</li>
                            <li><strong>HI</strong> - Hydroiodic acid</li>
                            <li><strong>HNO‚ÇÉ</strong> - Nitric acid</li>
                            <li><strong>H‚ÇÇSO‚ÇÑ</strong> - Sulfuric acid</li>
                            <li><strong>HClO‚ÇÉ</strong> - Chloric acid</li>
                            <li><strong>HClO‚ÇÑ</strong> - Perchloric acid</li>
                        </ol>
                    </div>

                    <div class="card">
                        <h4>üíß Weak Acids</h4>
                        <div class="concept-box">
                            <p><strong>Definition:</strong> Do NOT dissociate 100%</p>
                            <p style="margin-top: 10px;"><strong>Use equilibrium arrows (‚áå)</strong></p>
                            <div class="formula" style="font-size: 0.9em;">HC‚ÇÇH‚ÇÉO‚ÇÇ(aq) ‚áå H‚Å∫(aq) + C‚ÇÇH‚ÇÉO‚ÇÇ‚Åª(aq)</div>
                        </div>
                        <h4 style="margin-top: 20px;">Common Weak Acids:</h4>
                        <ul style="margin-left: 25px; margin-top: 10px;">
                            <li><strong>HC‚ÇÇH‚ÇÉO‚ÇÇ</strong> - Acetic acid</li>
                            <li><strong>HF</strong> - Hydrofluoric acid</li>
                            <li><strong>HNO‚ÇÇ</strong> - Nitrous acid</li>
                            <li><strong>H‚ÇÇCO‚ÇÉ</strong> - Carbonic acid</li>
                            <li><strong>H‚ÇÉPO‚ÇÑ</strong> - Phosphoric acid</li>
                        </ul>
                        <div class="concept-box tip" style="margin-top: 15px;">
                            <p><strong>Rule:</strong> If NOT on strong acid list ‚Üí WEAK acid!</p>
                        </div>
                    </div>
                </div>

                <div class="grid">
                    <div class="card">
                        <h4>üí• Strong Bases</h4>
                        <div class="concept-box important">
                            <p><strong>Definition:</strong> Dissociate <span class="highlight">100%</span> in aqueous solution</p>
                            <div class="formula" style="font-size: 0.9em;">NaOH(aq) ‚Üí Na‚Å∫(aq) + OH‚Åª(aq)</div>
                        </div>
                        <h4 style="margin-top: 20px;">MEMORIZE: Group 1 & some Group 2 Hydroxides</h4>
                        <ul style="margin-left: 25px; margin-top: 10px;">
                            <li><strong>LiOH</strong> - Lithium hydroxide</li>
                            <li><strong>NaOH</strong> - Sodium hydroxide</li>
                            <li><strong>KOH</strong> - Potassium hydroxide</li>
                            <li><strong>RbOH</strong> - Rubidium hydroxide</li>
                            <li><strong>CsOH</strong> - Cesium hydroxide</li>
                            <li><strong>Ca(OH)‚ÇÇ</strong> - Calcium hydroxide</li>
                            <li><strong>Sr(OH)‚ÇÇ</strong> - Strontium hydroxide</li>
                            <li><strong>Ba(OH)‚ÇÇ</strong> - Barium hydroxide</li>
                        </ul>
                    </div>

                    <div class="card">
                        <h4>üíß Weak Bases</h4>
                        <div class="concept-box">
                            <p><strong>Definition:</strong> Do NOT dissociate 100%</p>
                            <div class="formula" style="font-size: 0.9em;">NH‚ÇÉ(aq) + H‚ÇÇO(l) ‚áå NH‚ÇÑ‚Å∫(aq) + OH‚Åª(aq)</div>
                        </div>
                        <h4 style="margin-top: 20px;">Common Weak Bases:</h4>
                        <ul style="margin-left: 25px; margin-top: 10px;">
                            <li><strong>NH‚ÇÉ</strong> - Ammonia</li>
                            <li><strong>CH‚ÇÉNH‚ÇÇ</strong> - Methylamine</li>
                            <li><strong>(CH‚ÇÉ)‚ÇÇNH</strong> - Dimethylamine</li>
                            <li><strong>C‚ÇÖH‚ÇÖN</strong> - Pyridine</li>
                        </ul>
                        <div class="concept-box tip" style="margin-top: 15px;">
                            <p><strong>Rule:</strong> If NOT a hydroxide (OH‚Åª) compound ‚Üí WEAK base!</p>
                        </div>
                    </div>
                </div>

                <div class="concept-box important">
                    <h3>‚ö†Ô∏è CRITICAL CONCEPT: Polyprotic Acids and Bases</h3>
                    <p>Some acids/bases release multiple H‚Å∫ or OH‚Åª ions:</p>
                    <div class="formula">H‚ÇÇSO‚ÇÑ ‚Üí 2H‚Å∫ + SO‚ÇÑ¬≤‚Åª</div>
                    <p style="margin-top: 10px;">If [H‚ÇÇSO‚ÇÑ] = 0.1 M, then [H‚Å∫] = 0.2 M (2√ó the concentration!)</p>
                    <div class="formula">Ca(OH)‚ÇÇ ‚Üí Ca¬≤‚Å∫ + 2OH‚Åª</div>
                    <p style="margin-top: 10px;">If [Ca(OH)‚ÇÇ] = 0.1 M, then [OH‚Åª] = 0.2 M (2√ó the concentration!)</p>
                </div>
            </section>

            <!-- pH SCALE SECTION -->
            <section id="ph" class="section">
                <h2>üìä The pH Scale and Calculations</h2>

                <div class="video-container">
                    <div class="video-title">üì∫ pH and pOH Calculations - Dr. Dan</div>
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/-UrwKIGAj08" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>

                <button class="accordion">Water Equilibrium and Kw</button>
                <div class="panel">
                    <div class="panel-content">
                        <div class="concept-box">
                            <h3>Autoionization of Water</h3>
                            <p>Water is <strong>amphoteric</strong> - it can act as both an acid and a base!</p>
                            <div class="formula">H‚ÇÇO(l) + H‚ÇÇO(l) ‚áå H‚ÇÉO‚Å∫(aq) + OH‚Åª(aq)</div>
                            <p style="margin-top: 15px;"><em>Or simplified:</em></p>
                            <div class="formula">H‚ÇÇO(l) ‚áå H‚Å∫(aq) + OH‚Åª(aq)</div>
                        </div>

                        <div class="concept-box important">
                            <h3>The Water Constant (Kw)</h3>
                            <p>At 25¬∞C, in pure water:</p>
                            <div class="formula">[H‚ÇÉO‚Å∫] = [OH‚Åª] = 1.0 √ó 10‚Åª‚Å∑ M</div>
                            <p style="margin-top: 15px;"><strong>The product is a constant:</strong></p>
                            <div class="formula">Kw = [H‚ÇÉO‚Å∫][OH‚Åª] = 1.0 √ó 10‚Åª¬π‚Å¥</div>
                            <p style="margin-top: 20px; text-align: center; font-size: 1.2em;"><span class="highlight">This relationship ALWAYS holds in ANY aqueous solution at 25¬∞C!</span></p>
                        </div>

                        <div class="grid">
                            <div class="card">
                                <h4>üîµ Neutral Solution</h4>
                                <p>[H‚ÇÉO‚Å∫] = [OH‚Åª] = 1.0 √ó 10‚Åª‚Å∑ M</p>
                            </div>
                            <div class="card">
                                <h4>üî¥ Acidic Solution</h4>
                                <p>[H‚ÇÉO‚Å∫] > 1.0 √ó 10‚Åª‚Å∑ M</p>
                                <p>[OH‚Åª] < 1.0 √ó 10‚Åª‚Å∑ M</p>
                            </div>
                            <div class="card">
                                <h4>üü¢ Basic Solution</h4>
                                <p>[H‚ÇÉO‚Å∫] < 1.0 √ó 10‚Åª‚Å∑ M</p>
                                <p>[OH‚Åª] > 1.0 √ó 10‚Åª‚Å∑ M</p>
                            </div>
                        </div>

                        <div class="concept-box tip">
                            <h3>Using Kw for Calculations</h3>
                            <p>If you know [H‚ÇÉO‚Å∫], you can find [OH‚Åª]:</p>
                            <div class="formula">[OH‚Åª] = (1.0 √ó 10‚Åª¬π‚Å¥) / [H‚ÇÉO‚Å∫]</div>
                            <p style="margin-top: 15px;">If you know [OH‚Åª], you can find [H‚ÇÉO‚Å∫]:</p>
                            <div class="formula">[H‚ÇÉO‚Å∫] = (1.0 √ó 10‚Åª¬π‚Å¥) / [OH‚Åª]</div>
                        </div>
                    </div>
                </div>

                <button class="accordion">Understanding pH</button>
                <div class="panel">
                    <div class="panel-content">
                        <div class="concept-box">
                            <h3>Why do we use pH?</h3>
                            <p><strong>Problem:</strong> [H‚ÇÉO‚Å∫] values are typically very small numbers with negative exponents</p>
                            <p style="margin-top: 10px;">Example: 0.000001 M or 1.0 √ó 10‚Åª‚Å∂ M - hard to work with!</p>
                            <p style="margin-top: 10px;"><strong>Solution:</strong> The pH scale provides a simpler way!</p>
                        </div>

                        <div class="concept-box important">
                            <h3>Definition of pH</h3>
                            <div class="formula">pH = -log[H‚ÇÉO‚Å∫]</div>
                            <p style="margin-top: 15px;">pH is the <strong>negative logarithm</strong> (base 10) of the hydronium ion concentration</p>
                            <p style="margin-top: 10px;">Developed by S√∏ren S√∏rensen in 1909</p>
                        </div>

                        <div class="key-points">
                            <h4>Understanding the pH Scale (0-14)</h4>
                            <ul>
                                <li><strong>pH < 7</strong> ‚Üí Acidic solution (more H‚ÇÉO‚Å∫)</li>
                                <li><strong>pH = 7</strong> ‚Üí Neutral solution (equal H‚ÇÉO‚Å∫ and OH‚Åª)</li>
                                <li><strong>pH > 7</strong> ‚Üí Basic solution (more OH‚Åª)</li>
                                <li><strong>Lower pH</strong> = MORE acidic (higher [H‚ÇÉO‚Å∫])</li>
                                <li><strong>Higher pH</strong> = MORE basic (lower [H‚ÇÉO‚Å∫])</li>
                            </ul>
                        </div>

                        <h3>Calculating pH from [H‚ÇÉO‚Å∫]</h3>
                        <div class="concept-box">
                            <h4>Example 1:</h4>
                            <p>Calculate pH when [H‚ÇÉO‚Å∫] = 1.0 √ó 10‚Åª¬≥ M</p>
                            <p style="margin-top: 10px;"><strong>Solution:</strong></p>
                            <p>pH = -log(1.0 √ó 10‚Åª¬≥) = -(-3.00) = <strong>3.00</strong></p>
                        </div>

                        <div class="concept-box">
                            <h4>Example 2:</h4>
                            <p>Calculate pH when [H‚ÇÉO‚Å∫] = 3.44 √ó 10‚Åª‚Å¥ M</p>
                            <p style="margin-top: 10px;"><strong>Solution:</strong></p>
                            <p>pH = -log(3.44 √ó 10‚Åª‚Å¥) = <strong>3.46</strong></p>
                            <p style="margin-top: 15px;"><strong>Calculator Steps:</strong></p>
                            <ol style="margin-left: 20px;">
                                <li>Enter 3.44 √ó 10‚Åª‚Å¥</li>
                                <li>Press LOG button</li>
                                <li>Press +/- button (or multiply by -1)</li>
                                <li>Result: 3.46</li>
                            </ol>
                        </div>

                        <div class="concept-box tip">
                            <h3>Significant Figures in pH</h3>
                            <p><strong>Rule:</strong> The number of decimal places in pH equals the number of significant figures in [H‚ÇÉO‚Å∫]</p>
                            <p style="margin-top: 10px;">Examples:</p>
                            <ul style="margin-left: 20px; margin-top: 10px;">
                                <li>[H‚ÇÉO‚Å∫] = 3.44 √ó 10‚Åª‚Å¥ M (3 sig figs) ‚Üí pH = 3.46 (2 decimal places)</li>
                                <li>[H‚ÇÉO‚Å∫] = 1.0 √ó 10‚Åª¬≥ M (2 sig figs) ‚Üí pH = 3.00 (2 decimal places)</li>
                            </ul>
                        </div>

                        <h3>Calculating [H‚ÇÉO‚Å∫] from pH</h3>
                        <div class="concept-box important">
                            <div class="formula">[H‚ÇÉO‚Å∫] = 10‚Åª·µñ·¥¥</div>
                            <p style="text-align: center; margin-top: 10px;">OR</p>
                            <div class="formula">[H‚ÇÉO‚Å∫] = antilog(-pH)</div>
                        </div>

                        <div class="concept-box">
                            <h4>Example 3:</h4>
                            <p>Find [H‚ÇÉO‚Å∫] when pH = 12.6</p>
                            <p style="margin-top: 10px;"><strong>Solution:</strong></p>
                            <p>[H‚ÇÉO‚Å∫] = 10‚Åª¬π¬≤¬∑‚Å∂ = <strong>2.5 √ó 10‚Åª¬π¬≥ M</strong></p>
                            <p style="margin-top: 15px;"><strong>Calculator Steps (Method 1):</strong></p>
                            <ol style="margin-left: 20px;">
                                <li>Enter 12.6</li>
                                <li>Press +/- button (to get -12.6)</li>
                                <li>Press 10À£ button (or 2nd then LOG)</li>
                                <li>Result: 2.5 √ó 10‚Åª¬π¬≥</li>
                            </ol>
                        </div>
                    </div>
                </div>

                <button class="accordion">The pOH Scale</button>
                <div class="panel">
                    <div class="panel-content">
                        <div class="concept-box">
                            <h3>Definition of pOH</h3>
                            <p>Just as we express [H‚ÇÉO‚Å∫] as pH, we can express [OH‚Åª] as pOH:</p>
                            <div class="formula">pOH = -log[OH‚Åª]</div>
                        </div>

                        <div class="concept-box important">
                            <h3>Relationship Between pH and pOH</h3>
                            <p>Since Kw = [H‚ÇÉO‚Å∫][OH‚Åª] = 1.0 √ó 10‚Åª¬π‚Å¥</p>
                            <p style="margin-top: 15px;">Taking the negative logarithm of both sides:</p>
                            <div class="formula">pH + pOH = 14.00</div>
                            <p style="margin-top: 20px; text-align: center; font-size: 1.2em;"><span class="highlight">This is a powerful relationship at 25¬∞C!</span></p>
                        </div>

                        <div class="grid">
                            <div class="card">
                                <h4>If you know pH:</h4>
                                <div class="formula" style="font-size: 0.95em;">pOH = 14.00 - pH</div>
                            </div>
                            <div class="card">
                                <h4>If you know pOH:</h4>
                                <div class="formula" style="font-size: 0.95em;">pH = 14.00 - pOH</div>
                            </div>
                        </div>

                        <div class="concept-box success">
                            <h3>Complete Calculation Pathway</h3>
                            <p>You can convert between ALL FOUR quantities:</p>
                            <div style="text-align: center; margin: 20px 0; font-size: 1.1em; font-weight: bold;">
                                [H‚ÇÉO‚Å∫] ‚Üî pH ‚Üî pOH ‚Üî [OH‚Åª]
                            </div>
                            <p><strong>Key Formulas:</strong></p>
                            <ul style="margin-left: 20px; margin-top: 10px;">
                                <li>pH = -log[H‚ÇÉO‚Å∫]</li>
                                <li>[H‚ÇÉO‚Å∫] = 10‚Åª·µñ·¥¥</li>
                                <li>pH + pOH = 14.00</li>
                                <li>pOH = -log[OH‚Åª]</li>
                                <li>[OH‚Åª] = 10‚Åª·µñ·¥º·¥¥</li>
                                <li>[H‚ÇÉO‚Å∫][OH‚Åª] = 1.0 √ó 10‚Åª¬π‚Å¥</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- BUFFERS SECTION -->
            <section id="buffers" class="section">
                <h2>üõ°Ô∏è Buffer Solutions</h2>

                <div class="concept-box important">
                    <h3>The Problem</h3>
                    <p>Strong acids and bases can cause DRAMATIC pH changes:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Living systems require stable pH</li>
                        <li>Human blood pH must stay between 7.35-7.45</li>
                        <li>Example: If 1 mL of 0.05 M HCl added to blood without buffers: pH would drop from 7.4 to 4.9 (FATAL!)</li>
                    </ul>
                </div>

                <div class="concept-box success">
                    <h3>What is a Buffer?</h3>
                    <p><strong>Definition:</strong> A solution that <span class="highlight">resists large changes in pH</span> when small amounts of acid or base are added.</p>
                    <p style="margin-top: 15px;"><strong>Buffers are composed of:</strong></p>
                    <ol style="margin-left: 25px; margin-top: 10px;">
                        <li>A weak acid + its conjugate base (salt), OR</li>
                        <li>A weak base + its conjugate acid (salt)</li>
                    </ol>
                </div>

                <div class="grid">
                    <div class="card">
                        <h4>Example Buffer 1</h4>
                        <p><strong>Acetic Acid/Acetate Buffer</strong></p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>HC‚ÇÇH‚ÇÉO‚ÇÇ (weak acid)</li>
                            <li>+ NaC‚ÇÇH‚ÇÉO‚ÇÇ (provides conjugate base C‚ÇÇH‚ÇÉO‚ÇÇ‚Åª)</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>Example Buffer 2</h4>
                        <p><strong>Ammonia/Ammonium Buffer</strong></p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>NH‚ÇÉ (weak base)</li>
                            <li>+ NH‚ÇÑCl (provides conjugate acid NH‚ÇÑ‚Å∫)</li>
                        </ul>
                    </div>
                </div>

                <button class="accordion">How Buffers Work</button>
                <div class="panel">
                    <div class="panel-content">
                        <div class="concept-box">
                            <h3>When Strong Base (OH‚Åª) is Added:</h3>
                            <p>The <strong>weak acid</strong> component reacts with OH‚Åª:</p>
                            <div class="formula">HC‚ÇÇH‚ÇÉO‚ÇÇ(aq) + OH‚Åª(aq) ‚Üí C‚ÇÇH‚ÇÉO‚ÇÇ‚Åª(aq) + H‚ÇÇO(l)</div>
                            <ul style="margin-left: 20px; margin-top: 15px;">
                                <li>OH‚Åª ions are consumed</li>
                                <li>pH doesn't increase dramatically</li>
                                <li>Weak acid "neutralizes" the added base</li>
                            </ul>
                        </div>

                        <div class="concept-box">
                            <h3>When Strong Acid (H‚Å∫) is Added:</h3>
                            <p>The <strong>conjugate base</strong> component reacts with H‚Å∫:</p>
                            <div class="formula">C‚ÇÇH‚ÇÉO‚ÇÇ‚Åª(aq) + H‚Å∫(aq) ‚Üí HC‚ÇÇH‚ÇÉO‚ÇÇ(aq)</div>
                            <ul style="margin-left: 20px; margin-top: 15px;">
                                <li>H‚Å∫ ions are consumed</li>
                                <li>pH doesn't decrease dramatically</li>
                                <li>Conjugate base "neutralizes" the added acid</li>
                            </ul>
                        </div>

                        <div style="text-align: center; margin: 30px 0;">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 600 300'%3E%3Crect fill='%23f8f9fa' width='600' height='300'/%3E%3Ctext x='300' y='40' text-anchor='middle' font-size='24' font-weight='bold' fill='%232c3e50'%3EBuffer Action%3C/text%3E%3Crect x='50' y='80' width='200' height='180' fill='%23fff3cd' stroke='%23f39c12' stroke-width='3' rx='10'/%3E%3Ctext x='150' y='110' text-anchor='middle' font-weight='bold' fill='%232c3e50'%3EAdd OH‚Åª%3C/text%3E%3Ctext x='150' y='140' text-anchor='middle' font-size='14' fill='%23333'%3EWeak acid consumes it%3C/text%3E%3Ctext x='150' y='165' text-anchor='middle' font-size='12' fill='%23555'%3EHA + OH‚Åª ‚Üí A‚Åª + H‚ÇÇO%3C/text%3E%3Ctext x='150' y='200' text-anchor='middle' font-size='16' font-weight='bold' fill='%2327ae60'%3E‚úì pH stays stable%3C/text%3E%3Crect x='350' y='80' width='200' height='180' fill='%23fff5f5' stroke='%23e74c3c' stroke-width='3' rx='10'/%3E%3Ctext x='450' y='110' text-anchor='middle' font-weight='bold' fill='%232c3e50'%3EAdd H‚Å∫%3C/text%3E%3Ctext x='450' y='140' text-anchor='middle' font-size='14' fill='%23333'%3EConj. base consumes it%3C/text%3E%3Ctext x='450' y='165' text-anchor='middle' font-size='12' fill='%23555'%3EA‚Åª + H‚Å∫ ‚Üí HA%3C/text%3E%3Ctext x='450' y='200' text-anchor='middle' font-size='16' font-weight='bold' fill='%2327ae60'%3E‚úì pH stays stable%3C/text%3E%3C/svg%3E" alt="Buffer Action Diagram" style="max-width: 100%; height: auto;">
                        </div>
                    </div>
                </div>

                <button class="accordion">Biological Importance of Buffers</button>
                <div class="panel">
                    <div class="panel-content">
                        <div class="concept-box important">
                            <h3>Human Blood Buffer System</h3>
                            <p><strong>Primary buffer:</strong> H‚ÇÇCO‚ÇÉ/HCO‚ÇÉ‚Åª (carbonic acid/bicarbonate)</p>
                            <p style="margin-top: 10px;"><strong>Function:</strong> Maintains pH at 7.4</p>
                            <p style="margin-top: 10px;"><strong>Importance:</strong> Critical for enzyme function and cellular processes</p>
                            <p style="margin-top: 15px;">Even small deviations from pH 7.4 can be life-threatening!</p>
                        </div>

                        <h3>Other Applications of Buffers</h3>
                        <div class="grid">
                            <div class="card">
                                <h4>üß¨ Biological Systems</h4>
                                <ul style="margin-left: 20px;">
                                    <li>Blood pH regulation</li>
                                    <li>Cellular processes</li>
                                    <li>Enzyme activity</li>
                                </ul>
                            </div>
                            <div class="card">
                                <h4>üî¨ Laboratory</h4>
                                <ul style="margin-left: 20px;">
                                    <li>Chemical reactions</li>
                                    <li>Protein purification</li>
                                    <li>Cell culture media</li>
                                </ul>
                            </div>
                            <div class="card">
                                <h4>üè≠ Industrial</h4>
                                <ul style="margin-left: 20px;">
                                    <li>Fermentation</li>
                                    <li>Food processing</li>
                                    <li>Pharmaceuticals</li>
                                </ul>
                            </div>
                            <div class="card">
                                <h4>üß¥ Consumer Products</h4>
                                <ul style="margin-left: 20px;">
                                    <li>Shampoos</li>
                                    <li>Cosmetics</li>
                                    <li>Medicines</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PRACTICE SECTION -->
            <section id="practice" class="section">
                <h2>‚úèÔ∏è Practice Problems</h2>

                <div class="quiz-box">
                    <h4>Test Your Knowledge!</h4>
                    
                    <div class="quiz-question">
                        <p><strong>Problem 1:</strong> Identify each substance as an Arrhenius acid, Arrhenius base, or neither:</p>
                        <p style="margin-left: 20px;">a. KOH<br>b. C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ (glucose)<br>c. HClO‚ÇÑ</p>
                        <button class="show-answer" onclick="toggleAnswer('answer1')">Show Answer</button>
                        <div id="answer1" class="answer">
                            <strong>Answer:</strong><br>
                            a. Arrhenius base (produces OH‚Åª)<br>
                            b. Neither<br>
                            c. Arrhenius acid (produces H‚Å∫)
                        </div>
                    </div>

                    <div class="quiz-question">
                        <p><strong>Problem 2:</strong> Identify the Br√∏nsted-Lowry acid and base in this equation:</p>
                        <p style="margin-left: 20px;">HNO‚ÇÉ + H‚ÇÇO ‚Üí H‚ÇÉO‚Å∫ + NO‚ÇÉ‚Åª</p>
                        <button class="show-answer" onclick="toggleAnswer('answer2')">Show Answer</button>
                        <div id="answer2" class="answer">
                            <strong>Answer:</strong><br>
                            BL acid: HNO‚ÇÉ (donates H‚Å∫)<br>
                            BL base: H‚ÇÇO (accepts H‚Å∫)
                        </div>
                    </div>

                    <div class="quiz-question">
                        <p><strong>Problem 3:</strong> Identify the conjugate acid-base pairs:</p>
                        <p style="margin-left: 20px;">NH‚ÇÉ + H‚ÇÇO ‚áå NH‚ÇÑ‚Å∫ + OH‚Åª</p>
                        <button class="show-answer" onclick="toggleAnswer('answer3')">Show Answer</button>
                        <div id="answer3" class="answer">
                            <strong>Answer:</strong><br>
                            Pair 1: NH‚ÇÉ/NH‚ÇÑ‚Å∫ (base/conjugate acid)<br>
                            Pair 2: H‚ÇÇO/OH‚Åª (acid/conjugate base)
                        </div>
                    </div>

                    <div class="quiz-question">
                        <p><strong>Problem 4:</strong> Write the balanced neutralization reaction between H‚ÇÉPO‚ÇÑ and NaOH. What is the salt?</p>
                        <button class="show-answer" onclick="toggleAnswer('answer4')">Show Answer</button>
                        <div id="answer4" class="answer">
                            <strong>Answer:</strong><br>
                            H‚ÇÉPO‚ÇÑ + 3NaOH ‚Üí Na‚ÇÉPO‚ÇÑ + 3H‚ÇÇO<br>
                            Salt: Na‚ÇÉPO‚ÇÑ (sodium phosphate)
                        </div>
                    </div>

                    <div class="quiz-question">
                        <p><strong>Problem 5:</strong> Classify as strong or weak:</p>
                        <p style="margin-left: 20px;">a. HBr<br>b. NH‚ÇÉ<br>c. Ba(OH)‚ÇÇ<br>d. HF</p>
                        <button class="show-answer" onclick="toggleAnswer('answer5')">Show Answer</button>
                        <div id="answer5" class="answer">
                            <strong>Answer:</strong><br>
                            a. Strong acid<br>
                            b. Weak base<br>
                            c. Strong base<br>
                            d. Weak acid
                        </div>
                    </div>

                    <div class="quiz-question">
                        <p><strong>Problem 6:</strong> What is [OH‚Åª] if [H‚ÇÉO‚Å∫] = 2.5 √ó 10‚Åª‚Åµ M?</p>
                        <button class="show-answer" onclick="toggleAnswer('answer6')">Show Answer</button>
                        <div id="answer6" class="answer">
                            <strong>Answer:</strong><br>
                            [OH‚Åª] = Kw / [H‚ÇÉO‚Å∫] = (1.0 √ó 10‚Åª¬π‚Å¥) / (2.5 √ó 10‚Åª‚Åµ)<br>
                            [OH‚Åª] = 4.0 √ó 10‚Åª¬π‚Å∞ M
                        </div>
                    </div>

                    <div class="quiz-question">
                        <p><strong>Problem 7:</strong> Calculate the pH when [H‚ÇÉO‚Å∫] = 3.8 √ó 10‚Åª‚Åπ M. Is this acidic, basic, or neutral?</p>
                        <button class="show-answer" onclick="toggleAnswer('answer7')">Show Answer</button>
                        <div id="answer7" class="answer">
                            <strong>Answer:</strong><br>
                            pH = -log(3.8 √ó 10‚Åª‚Åπ) = 8.42<br>
                            Since pH > 7, the solution is BASIC
                        </div>
                    </div>

                    <div class="quiz-question">
                        <p><strong>Problem 8:</strong> If pH = 5.73, what is pOH? What is [H‚ÇÉO‚Å∫]?</p>
                        <button class="show-answer" onclick="toggleAnswer('answer8')">Show Answer</button>
                        <div id="answer8" class="answer">
                            <strong>Answer:</strong><br>
                            pOH = 14.00 - 5.73 = 8.27<br>
                            [H‚ÇÉO‚Å∫] = 10‚Åª‚Åµ¬∑‚Å∑¬≥ = 1.9 √ó 10‚Åª‚Å∂ M
                        </div>
                    </div>

                    <div class="quiz-question">
                        <p><strong>Problem 9:</strong> Calculate the pH of a 0.025 M HCl solution.</p>
                        <button class="show-answer" onclick="toggleAnswer('answer9')">Show Answer</button>
                        <div id="answer9" class="answer">
                            <strong>Answer:</strong><br>
                            HCl is a strong acid: [H‚ÇÉO‚Å∫] = 0.025 M = 2.5 √ó 10‚Åª¬≤ M<br>
                            pH = -log(2.5 √ó 10‚Åª¬≤) = 1.60
                        </div>
                    </div>

                    <div class="quiz-question">
                        <p><strong>Problem 10:</strong> Which could act as a buffer?</p>
                        <p style="margin-left: 20px;">a. HCl + NaCl<br>b. NH‚ÇÉ + NH‚ÇÑCl<br>c. NaOH + NaCl</p>
                        <button class="show-answer" onclick="toggleAnswer('answer10')">Show Answer</button>
                        <div id="answer10" class="answer">
                            <strong>Answer:</strong><br>
                            Only b. NH‚ÇÉ + NH‚ÇÑCl<br>
                            (Weak base + its conjugate acid)
                        </div>
                    </div>
                </div>

                <div class="key-points">
                    <h4>üìñ Additional Practice Resources</h4>
                    <p>For more practice, work through these problems from your textbook:</p>
                    <ul>
                        <li><strong>Arrhenius:</strong> Problems #1-14</li>
                        <li><strong>Br√∏nsted-Lowry:</strong> Problems #1-18</li>
                        <li><strong>Strong/Weak:</strong> Problems #1-14</li>
                        <li><strong>Water Equilibrium:</strong> Problems #1-18</li>
                        <li><strong>pH/pOH:</strong> Problems #1-20</li>
                    </ul>
                </div>
            </section>

            <!-- SUMMARY SECTION -->
            <section class="section">
                <h2>üìù Chapter Summary</h2>

                <div class="grid">
                    <div class="card">
                        <h4>Properties</h4>
                        <p><strong>Acids:</strong> Sour, turn litmus red, react with metals</p>
                        <p><strong>Bases:</strong> Bitter, slippery, turn litmus blue</p>
                    </div>

                    <div class="card">
                        <h4>Definitions</h4>
                        <p><strong>Arrhenius:</strong> H‚Å∫/OH‚Åª producers (aqueous only)</p>
                        <p><strong>Br√∏nsted-Lowry:</strong> H‚Å∫ donors/acceptors (more general)</p>
                    </div>

                    <div class="card">
                        <h4>Strength</h4>
                        <p><strong>Strong:</strong> 100% dissociation</p>
                        <p><strong>Weak:</strong> < 100% dissociation</p>
                    </div>

                    <div class="card">
                        <h4>pH Scale</h4>
                        <p><strong>pH = -log[H‚ÇÉO‚Å∫]</strong></p>
                        <p><strong>pH + pOH = 14.00</strong></p>
                        <p><strong>Kw = 1.0 √ó 10‚Åª¬π‚Å¥</strong></p>
                    </div>
                </div>

                <div class="concept-box success">
                    <h3>üéØ Key Skills to Master</h3>
                    <ol style="margin-left: 25px;">
                        <li>Identify acids and bases by different definitions</li>
                        <li>Write dissociation and neutralization equations</li>
                        <li>Identify conjugate acid-base pairs</li>
                        <li>Classify acids/bases as strong or weak</li>
                        <li>Use Kw to calculate [H‚ÇÉO‚Å∫] or [OH‚Åª]</li>
                        <li>Convert between pH, pOH, [H‚ÇÉO‚Å∫], and [OH‚Åª]</li>
                        <li>Understand buffer function</li>
                    </ol>
                </div>

                <div class="concept-box important">
                    <h3>üìö Most Important Formulas</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                        <div class="formula">Kw = [H‚ÇÉO‚Å∫][OH‚Åª] = 1.0 √ó 10‚Åª¬π‚Å¥</div>
                        <div class="formula">pH = -log[H‚ÇÉO‚Å∫]</div>
                        <div class="formula">pOH = -log[OH‚Åª]</div>
                        <div class="formula">pH + pOH = 14.00</div>
                        <div class="formula">[H‚ÇÉO‚Å∫] = 10‚Åª·µñ·¥¥</div>
                        <div class="formula">[OH‚Åª] = 10‚Åª·µñ·¥º·¥¥</div>
                    </div>
                </div>
            </section>

        </div>

        <footer>
            <p><strong>Chapter 12: Acids and Bases - Interactive Review</strong></p>
            <p>CHEM 3A - Introductory General Chemistry</p>
            <p style="margin-top: 15px;">Study hard and good luck! üéì</p>
        </footer>
    </div>

    <!-- AI Study Buddy Modal -->
    <div id="aiModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ü§ñ AI Study Buddy - Acids & Bases</h2>
                <button class="close-btn" onclick="closeAIStudyBuddy()">&times;</button>
            </div>
            
            <div id="chatContainer" class="chat-container">
                <div class="welcome-message">
                    <h3>üëã Welcome to your AI Study Buddy!</h3>
                    <p>I'm here to help you practice Chapter 12: Acids and Bases.</p>
                    <p>I can:</p>
                    <ul style="text-align: left; max-width: 500px; margin: 20px auto;">
                        <li>‚úÖ Generate practice problems at your level</li>
                        <li>‚úÖ Guide you step-by-step through solutions</li>
                        <li>‚úÖ Explain concepts when you're stuck</li>
                        <li>‚úÖ Check your work and provide feedback</li>
                        <li>‚úÖ Adapt to your learning pace</li>
                    </ul>
                    <p style="margin-top: 20px;"><strong>Choose a topic to start practicing:</strong></p>
                    <div class="topic-buttons">
                        <button class="topic-btn" onclick="requestTopic('properties')">Properties of Acids & Bases</button>
                        <button class="topic-btn" onclick="requestTopic('definitions')">Arrhenius & Br√∏nsted-Lowry</button>
                        <button class="topic-btn" onclick="requestTopic('conjugate')">Conjugate Acid-Base Pairs</button>
                        <button class="topic-btn" onclick="requestTopic('neutralization')">Neutralization Reactions</button>
                        <button class="topic-btn" onclick="requestTopic('strength')">Strong vs Weak</button>
                        <button class="topic-btn" onclick="requestTopic('kw')">Water Equilibrium & Kw</button>
                        <button class="topic-btn" onclick="requestTopic('ph')">pH & pOH Calculations</button>
                        <button class="topic-btn" onclick="requestTopic('buffers')">Buffer Solutions</button>
                        <button class="topic-btn" onclick="requestTopic('mixed')">Mixed Practice</button>
                    </div>
                </div>
            </div>
            
            <div class="quick-actions">
                <button class="quick-action-btn" onclick="requestNewQuestion()">üìù New Question</button>
                <button class="quick-action-btn" onclick="requestHint()">üí° Give me a hint</button>
                <button class="quick-action-btn" onclick="requestExplanation()">üìñ Explain this concept</button>
                <button class="quick-action-btn" onclick="requestCheckWork()">‚úì Check my work</button>
            </div>
            
            <div class="input-area">
                <input type="text" id="userInput" placeholder="Type your answer or ask a question..." onkeypress="handleKeyPress(event)">
                <button class="send-btn" id="sendBtn" onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

    <script>
        // Accordion functionality
        var acc = document.getElementsByClassName("accordion");
        for (var i = 0; i < acc.length; i++) {
            acc[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var panel = this.nextElementSibling;
                if (panel.style.maxHeight) {
                    panel.style.maxHeight = null;
                } else {
                    panel.style.maxHeight = panel.scrollHeight + "px";
                }
            });
        }

        // Show/hide answer functionality
        function toggleAnswer(answerId) {
            var answer = document.getElementById(answerId);
            if (answer.style.display === "none" || answer.style.display === "") {
                answer.style.display = "block";
            } else {
                answer.style.display = "none";
            }
        }

        // Smooth scrolling for navigation
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            });
        });

        // AI Study Buddy Functionality
        let conversationHistory = [];
        let isProcessing = false;

        const SYSTEM_PROMPT = `You are an expert chemistry tutor specializing in Chapter 12: Acids and Bases. Your role is to help students practice and understand concepts through interactive problem-solving.

TEACHING PHILOSOPHY:
- Generate practice questions appropriate for introductory chemistry (CHEM 3A level)
- Guide students step-by-step rather than giving direct answers
- Ask leading questions to help students think through problems
- Provide hints before full explanations
- Celebrate correct answers and gently correct misconceptions
- Adapt difficulty based on student performance

TOPICS YOU CAN HELP WITH:
1. Properties of acids and bases
2. Arrhenius definitions (H‚Å∫ and OH‚Åª producers)
3. Br√∏nsted-Lowry definitions (proton donors/acceptors)
4. Conjugate acid-base pairs
5. Neutralization reactions and salts
6. Strong vs weak acids and bases
7. Water autoionization and Kw = 1.0 √ó 10‚Åª¬π‚Å¥
8. pH and pOH calculations
9. Buffer solutions

PROBLEM GENERATION GUIDELINES:
- When asked for a question, generate ONE clear, focused practice problem
- Match the difficulty to introductory chemistry level
- Include all necessary information
- For calculations, use realistic numbers
- State what the student should find

INTERACTION STYLE:
- Friendly and encouraging
- Use emojis occasionally (but not excessively)
- Break complex problems into manageable steps
- When student answers, acknowledge their response and guide them forward
- If student is stuck, provide progressive hints
- When checking work, explain WHY answers are correct or incorrect

IMPORTANT:
- Never give away the full answer immediately
- Always engage the student in the problem-solving process
- Provide chemical equations when relevant
- Use proper chemical notation (subscripts, superscripts, charges)
- Be patient and supportive

Start each new topic request by generating an appropriate practice question.`;

        function openAIStudyBuddy() {
            document.getElementById('aiModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeAIStudyBuddy() {
            document.getElementById('aiModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function clearChat() {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.innerHTML = `
                <div class="welcome-message">
                    <h3>üëã Welcome to your AI Study Buddy!</h3>
                    <p>I'm here to help you practice Chapter 12: Acids and Bases.</p>
                    <p>I can:</p>
                    <ul style="text-align: left; max-width: 500px; margin: 20px auto;">
                        <li>‚úÖ Generate practice problems at your level</li>
                        <li>‚úÖ Guide you step-by-step through solutions</li>
                        <li>‚úÖ Explain concepts when you're stuck</li>
                        <li>‚úÖ Check your work and provide feedback</li>
                        <li>‚úÖ Adapt to your learning pace</li>
                    </ul>
                    <p style="margin-top: 20px;"><strong>Choose a topic to start practicing:</strong></p>
                    <div class="topic-buttons">
                        <button class="topic-btn" onclick="requestTopic('properties')">Properties of Acids & Bases</button>
                        <button class="topic-btn" onclick="requestTopic('definitions')">Arrhenius & Br√∏nsted-Lowry</button>
                        <button class="topic-btn" onclick="requestTopic('conjugate')">Conjugate Acid-Base Pairs</button>
                        <button class="topic-btn" onclick="requestTopic('neutralization')">Neutralization Reactions</button>
                        <button class="topic-btn" onclick="requestTopic('strength')">Strong vs Weak</button>
                        <button class="topic-btn" onclick="requestTopic('kw')">Water Equilibrium & Kw</button>
                        <button class="topic-btn" onclick="requestTopic('ph')">pH & pOH Calculations</button>
                        <button class="topic-btn" onclick="requestTopic('buffers')">Buffer Solutions</button>
                        <button class="topic-btn" onclick="requestTopic('mixed')">Mixed Practice</button>
                    </div>
                </div>
            `;
            conversationHistory = [];
        }

        function addMessage(content, isUser = false) {
            const chatContainer = document.getElementById('chatContainer');
            
            // Remove welcome message if it exists
            const welcomeMsg = chatContainer.querySelector('.welcome-message');
            if (welcomeMsg) {
                welcomeMsg.remove();
            }

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'ai'}`;
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            
            const label = document.createElement('div');
            label.className = 'message-label';
            label.textContent = isUser ? 'You' : 'ü§ñ AI Tutor';
            
            const text = document.createElement('div');
            text.innerHTML = content.replace(/\n/g, '<br>');
            
            messageContent.appendChild(label);
            messageContent.appendChild(text);
            messageDiv.appendChild(messageContent);
            chatContainer.appendChild(messageDiv);
            
            // Scroll to bottom
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function showLoading() {
            const chatContainer = document.getElementById('chatContainer');
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'message ai';
            loadingDiv.id = 'loadingMessage';
            loadingDiv.innerHTML = `
                <div class="message-content">
                    <div class="message-label">ü§ñ AI Tutor</div>
                    <div class="loading">
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                    </div>
                </div>
            `;
            chatContainer.appendChild(loadingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function hideLoading() {
            const loadingMsg = document.getElementById('loadingMessage');
            if (loadingMsg) {
                loadingMsg.remove();
            }
        }

        async function callClaude(userMessage) {
            if (isProcessing) return;
            
            isProcessing = true;
            const sendBtn = document.getElementById('sendBtn');
            sendBtn.disabled = true;
            
            showLoading();

            try {
                // Add user message to history
                conversationHistory.push({
                    role: "user",
                    content: userMessage
                });

                // Prepare messages for API
                const messages = [...conversationHistory];

                // TODO: REPLACE THIS URL WITH YOUR VERCEL DEPLOYMENT URL!
                // It should look like: https://your-project-name.vercel.app/api/chat
                const BACKEND_URL = "https://ai-study-buddy-backend-nine.vercel.app/api/chat";
                
                // Check if URL has been updated
                if (BACKEND_URL.includes("YOUR-VERCEL-URL-HERE")) {
                    throw new Error("Please update BACKEND_URL in the code with your Vercel deployment URL. See SETUP_GUIDE.md for instructions.");
                }

                const response = await fetch(BACKEND_URL, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        system: SYSTEM_PROMPT,
                        messages: messages
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(`API request failed: ${response.status} - ${errorData.error || 'Unknown error'}`);
                }

                const data = await response.json();
                const aiResponse = data.content[0].text;

                // Add AI response to history
                conversationHistory.push({
                    role: "assistant",
                    content: aiResponse
                });

                hideLoading();
                addMessage(aiResponse, false);

            } catch (error) {
                hideLoading();
                let errorMessage = "Sorry, I'm having trouble connecting right now. Please try again! üîÑ";
                
                // Provide more specific error message
                if (error.message.includes("YOUR-VERCEL-URL-HERE")) {
                    errorMessage = "‚ö†Ô∏è Backend URL not configured. Please see setup instructions.";
                } else if (error.message.includes("Failed to fetch")) {
                    errorMessage = "‚ùå Cannot reach the server. Please check your Vercel deployment.";
                }
                
                addMessage(errorMessage, false);
                console.error("Error calling Claude API:", error);
            } finally {
                isProcessing = false;
                sendBtn.disabled = false;
            }
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (message && !isProcessing) {
                addMessage(message, true);
                input.value = '';
                callClaude(message);
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !isProcessing) {
                sendMessage();
            }
        }

        function requestTopic(topic) {
            const topicMessages = {
                'properties': 'Generate a practice question about the properties of acids and bases.',
                'definitions': 'Generate a practice question about Arrhenius and Br√∏nsted-Lowry definitions of acids and bases.',
                'conjugate': 'Generate a practice question about identifying conjugate acid-base pairs.',
                'neutralization': 'Generate a practice question about neutralization reactions and identifying salts.',
                'strength': 'Generate a practice question about classifying acids and bases as strong or weak.',
                'kw': 'Generate a practice question about water equilibrium and using Kw to calculate ion concentrations.',
                'ph': 'Generate a practice question about pH and pOH calculations.',
                'buffers': 'Generate a practice question about buffer solutions and how they work.',
                'mixed': 'Generate a mixed practice question on any topic from Chapter 12: Acids and Bases.'
            };

            const message = topicMessages[topic];
            addMessage(message, true);
            callClaude(message);
        }

        function requestNewQuestion() {
            const message = "Give me a new practice question on a different topic.";
            addMessage(message, true);
            callClaude(message);
        }

        function requestHint() {
            const message = "Can you give me a hint to help me solve this problem?";
            addMessage(message, true);
            callClaude(message);
        }

        function requestExplanation() {
            const message = "Can you explain the concept behind this problem?";
            addMessage(message, true);
            callClaude(message);
        }

        function requestCheckWork() {
            const message = "Can you check if my approach is correct so far?";
            addMessage(message, true);
            callClaude(message);
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('aiModal');
            if (event.target == modal) {
                closeAIStudyBuddy();
            }
        }
    </script>
</body>
</html>
